{% extends 'base-admin.html.twig' %}

{% set action = app.current_route == 'app_projet_new' ? 'Ajout' : 'Edition' %}

{% block title %}{{ action }} d'un projet{% endblock %}

{% block body %}

    <h1>{{ action }} d'un projet</h1>

    {{ include('admin/projet/_form.html.twig') }}
    
    {% if app.current_route == 'app_admin_projet_edit' %}
        {% for image in images %}
            <div class="image-preview">
                <img src="{{ asset('uploads/' ~ image.path) }}" alt="Image du projet" width="100">
            </div>
        {% endfor %}
    {% endif %}

    <a href="{{ path('app_admin_projet_index') }}">back to list</a>

{% endblock %}

{# {% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('/js/tinymce/tinymce.min.js') }}" referrerpolicy="origin"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let textarea = document.querySelector('.tinymce');
            console.log(textarea);

            if(!textarea) {
                return;
            }

            if (textarea.style.display !== 'none' && !tinymce.get('projet_description')){
                tinymce.init({
                    selector: '.tinymce',
                    license_key: 'gpl'
                });
            }
        });
    </script>

{% endblock %} #}